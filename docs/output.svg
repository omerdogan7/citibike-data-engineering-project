<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600">
  <!-- Background -->
  <rect width="1200" height="600" fill="#f5f5f5" rx="10" ry="10"/>
  
  <!-- Title -->
  <text x="600" y="40" font-family="Arial" font-size="32" text-anchor="middle" font-weight="bold">Citibike Data Pipeline Flow</text>
  
  <!-- Docker Container Border - Centered -->
  <rect x="150" y="70" width="900" height="420" fill="none" stroke="#0db7ed" stroke-width="4" stroke-dasharray="12,6" rx="12" ry="12"/>
  <text x="250" y="95" font-family="Arial" font-size="22" text-anchor="start" font-weight="bold" fill="#0db7ed">Docker Environment</text>
   
  <!-- Airflow Orchestration Banner (Top) -->
  <rect x="200" y="120" width="800" height="60" fill="#d1c4e9" stroke="#673ab7" stroke-width="3" rx="8" ry="8"/>
  <text x="600" y="160" font-family="Arial" font-size="22" text-anchor="middle" font-weight="bold">Apache Airflow Orchestration</text>
  <!-- Main Pipeline Flow - Centered -->
  <!-- Data Download -->
  <rect x="200" y="250" width="180" height="80" fill="#e1f5fe" stroke="#0277bd" stroke-width="3" rx="8" ry="8"/>
  <text x="290" y="285" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold">Data Download</text>
  <text x="290" y="310" font-family="Arial" font-size="16" text-anchor="middle">tripdata (ZIP)</text>
  
  <!-- Arrow from S3 to Batch Processing -->
  <line x1="380" y1="290" x2="410" y2="290" stroke="#0277bd" stroke-width="3">
    <animate attributeName="stroke-dasharray" from="0,20" to="20,20" dur="2s" repeatCount="indefinite" />
  </line>
  <polygon points="410,290 400,285 400,295" fill="#0277bd">
    <animate attributeName="transform" attributeType="XML" type="translate" from="0,0" to="10,0" dur="2s" repeatCount="indefinite" additive="sum" />
    <animate attributeName="transform" attributeType="XML" type="translate" from="10,0" to="0,0" dur="2s" begin="2s" repeatCount="indefinite" additive="sum" />
  </polygon>
  
  <!-- Batch Processing -->
  <rect x="410" y="250" width="180" height="80" fill="#e8f5e9" stroke="#2e7d32" stroke-width="3" rx="8" ry="8"/>
  <text x="500" y="285" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold">Batch Processing</text>
  <text x="500" y="310" font-family="Arial" font-size="16" text-anchor="middle">Apache Spark</text>
  
  <!-- Arrow from Batch Processing to GCS -->
  <line x1="590" y1="290" x2="620" y2="290" stroke="#2e7d32" stroke-width="3">
    <animate attributeName="stroke-dasharray" from="0,20" to="20,20" dur="2s" repeatCount="indefinite" />
  </line>
  <polygon points="620,290 610,285 610,295" fill="#2e7d32">
    <animate attributeName="transform" attributeType="XML" type="translate" from="0,0" to="10,0" dur="2s" repeatCount="indefinite" additive="sum" />
    <animate attributeName="transform" attributeType="XML" type="translate" from="10,0" to="0,0" dur="2s" begin="2s" repeatCount="indefinite" additive="sum" />
  </polygon>
  
  <!-- GCS Storage -->
  <rect x="620" y="250" width="180" height="80" fill="#e1f5fe" stroke="#0277bd" stroke-width="3" rx="8" ry="8"/>
  <text x="710" y="285" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold">GCS Storage</text>
  <text x="710" y="310" font-family="Arial" font-size="16" text-anchor="middle">Cloud Storage</text>
  
  <!-- Arrow from GCS to BigQuery -->
  <line x1="800" y1="290" x2="830" y2="290" stroke="#0277bd" stroke-width="3">
    <animate attributeName="stroke-dasharray" from="0,20" to="20,20" dur="2s" repeatCount="indefinite" />
  </line>
  <polygon points="830,290 820,285 820,295" fill="#0277bd">
    <animate attributeName="transform" attributeType="XML" type="translate" from="0,0" to="10,0" dur="2s" repeatCount="indefinite" additive="sum" />
    <animate attributeName="transform" attributeType="XML" type="translate" from="10,0" to="0,0" dur="2s" begin="2s" repeatCount="indefinite" additive="sum" />
  </polygon>
  
  <!-- BigQuery -->
  <rect x="830" y="250" width="180" height="80" fill="#fff8e1" stroke="#ff8f00" stroke-width="3" rx="8" ry="8"/>
  <text x="920" y="285" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold">BigQuery</text>
  <text x="920" y="310" font-family="Arial" font-size="16" text-anchor="middle">Data Warehouse</text>
  
  <!-- Arrow from BigQuery to DBT -->
  <line x1="920" y1="330" x2="920" y2="360" stroke="#ff8f00" stroke-width="3">
    <animate attributeName="stroke-dasharray" from="0,20" to="20,20" dur="2s" repeatCount="indefinite" />
  </line>
  <polygon points="920,360 915,350 925,350" fill="#ff8f00">
    <animate attributeName="transform" attributeType="XML" type="translate" from="0,0" to="0,10" dur="2s" repeatCount="indefinite" additive="sum" />
    <animate attributeName="transform" attributeType="XML" type="translate" from="0,10" to="0,0" dur="2s" begin="2s" repeatCount="indefinite" additive="sum" />
  </polygon>
  
  <!-- DBT -->
  <rect x="830" y="360" width="180" height="80" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="3" rx="8" ry="8"/>
  <text x="920" y="395" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold">DBT</text>
  <text x="920" y="420" font-family="Arial" font-size="16" text-anchor="middle">Transformation</text>
  
  <!-- Arrows from Airflow to all components with animation -->
  <!-- Airflow to S3 -->
  <line x1="290" y1="180" x2="290" y2="250" stroke="#673ab7" stroke-width="2">
    <animate attributeName="stroke-dasharray" from="0,10" to="10,10" dur="1.5s" repeatCount="indefinite" />
  </line>
  <polygon points="290,250 285,240 295,240" fill="#673ab7">
    <animate attributeName="transform" attributeType="XML" type="translate" from="0,0" to="0,10" dur="1.5s" repeatCount="indefinite" additive="sum" />
    <animate attributeName="transform" attributeType="XML" type="translate" from="0,10" to="0,0" dur="1.5s" begin="1.5s" repeatCount="indefinite" additive="sum" />
  </polygon>
  
  <!-- Airflow to Batch Processing -->
  <line x1="500" y1="180" x2="500" y2="250" stroke="#673ab7" stroke-width="2">
    <animate attributeName="stroke-dasharray" from="0,10" to="10,10" dur="1.5s" repeatCount="indefinite" />
  </line>
  <polygon points="500,250 495,240 505,240" fill="#673ab7">
    <animate attributeName="transform" attributeType="XML" type="translate" from="0,0" to="0,10" dur="1.5s" repeatCount="indefinite" additive="sum" />
    <animate attributeName="transform" attributeType="XML" type="translate" from="0,10" to="0,0" dur="1.5s" begin="1.5s" repeatCount="indefinite" additive="sum" />
  </polygon>
  
  <!-- Airflow to GCS -->
  <line x1="710" y1="180" x2="710" y2="250" stroke="#673ab7" stroke-width="2">
    <animate attributeName="stroke-dasharray" from="0,10" to="10,10" dur="1.5s" repeatCount="indefinite" />
  </line>
  <polygon points="710,250 705,240 715,240" fill="#673ab7">
    <animate attributeName="transform" attributeType="XML" type="translate" from="0,0" to="0,10" dur="1.5s" repeatCount="indefinite" additive="sum" />
    <animate attributeName="transform" attributeType="XML" type="translate" from="0,10" to="0,0" dur="1.5s" begin="1.5s" repeatCount="indefinite" additive="sum" />
  </polygon>
  
  <!-- Airflow to BigQuery -->
  <line x1="920" y1="180" x2="920" y2="250" stroke="#673ab7" stroke-width="2">
    <animate attributeName="stroke-dasharray" from="0,10" to="10,10" dur="1.5s" repeatCount="indefinite" />
  </line>
  <polygon points="920,250 915,240 925,240" fill="#673ab7">
    <animate attributeName="transform" attributeType="XML" type="translate" from="0,0" to="0,10" dur="1.5s" repeatCount="indefinite" additive="sum" />
    <animate attributeName="transform" attributeType="XML" type="translate" from="0,10" to="0,0" dur="1.5s" begin="1.5s" repeatCount="indefinite" additive="sum" />
  </polygon>
  
  <!-- Airflow to DBT -->
  <line x1="950" y1="180" x2="975" y2="360" stroke="#673ab7" stroke-width="2">
    <animate attributeName="stroke-dasharray" from="0,10" to="10,10" dur="1.5s" repeatCount="indefinite" />
  </line>
  <polygon points="975,360 967,352 977,350" fill="#673ab7">
    <animate attributeName="transform" attributeType="XML" type="translate" from="0,0" to="0,10" dur="1.5s" repeatCount="indefinite" additive="sum" />
    <animate attributeName="transform" attributeType="XML" type="translate" from="0,10" to="0,0" dur="1.5s" begin="1.5s" repeatCount="indefinite" additive="sum" />
  </polygon>
  
  <!-- External Components - Made similar to other boxes -->
  <!-- Terraform -->
  <rect x="300" y="510" width="180" height="80" fill="#DCEDC8" stroke="#33691E" stroke-width="3" rx="8" ry="8"/>
  <text x="390" y="545" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold">Terraform</text>
  <text x="390" y="570" font-family="Arial" font-size="16" text-anchor="middle">Infrastructure as Code</text>
  
  <!-- Tableau Section -->
  <rect x="720" y="510" width="180" height="80" fill="#ffebee" stroke="#c62828" stroke-width="3" rx="8" ry="8"/>
  <text x="810" y="545" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold">Tableau</text>
  <text x="810" y="570" font-family="Arial" font-size="16" text-anchor="middle">Dashboarding</text>
  
  <!-- Arrow from DBT to Tableau -->
  <line x1="920" y1="440" x2="810" y2="510" stroke="#7b1fa2" stroke-width="3">
    <animate attributeName="stroke-dasharray" from="0,20" to="20,20" dur="2s" repeatCount="indefinite" />
  </line>
  <polygon points="810,510 815,500 825,508" fill="#7b1fa2">
    <animate attributeName="transform" attributeType="XML" type="translate" from="0,0" to="-5,5" dur="2s" repeatCount="indefinite" additive="sum" />
    <animate attributeName="transform" attributeType="XML" type="translate" from="-5,5" to="0,0" dur="2s" begin="2s" repeatCount="indefinite" additive="sum" />
  </polygon>
</svg>